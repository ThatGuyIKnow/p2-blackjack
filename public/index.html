<!DOCTYPE html>
<html>
  <head>
    <title>P2 General Cards</title>
    <meta charset="UTF-8">
    <link href="./css/main.css" type="text/css" rel="stylesheet">
  </head>
  <body>
    <h1>Tester tester</h1>
    <h2>1..2..3</h2>
    <div>
      <button onclick="accessRoom('room1')">Room 1</button>
      <button onclick="accessRoom('room2')">Room 2</button>
      <button onclick="accessRoom('room3')">Room 3</button>
      <button onclick="accessRoom('room4')">Room 4</button>
      <button onclick="doTheThing()">Action</button>
    </div>
    
    <textarea id="testAction" rows="4" cols="50">
      {
        "action": "MovePile",
        "sequence": {
            "from": {
              "pile": "f_pile",
              "pile_number": 0,
              "card_number": 1
            },
            "to": {
              "pile": "f_pile",
              "pile_number": 5
            }
          }
       }
    </textarea>

    <div id="stateDisplay">
      state: {<br>
        f_pile : [<br>
        [<br>  { suit: 'spades', rank: 1, id: 1, isJoker: false, hidden: false },<br>
            { suit: 'spades', rank: 2, id: 2, isJoker: false, hidden: false },
          <br>
          ],<br>
        [],<br>
        [],<br>
        []<br>
        ],<br>
        t_pile : [<br>
        [<br>
            { suit: 'hearts', rank: 9, id: 22, isJoker: false, hidden: false },<br>
            { suit: 'spades', rank: 8, id: 8, isJoker: false, hidden: false },],<br>
        [<br>
            { suit: 'spades', rank: 3, id: 3, isJoker: false, hidden: false },<br>
        ],<br>
        [<br>
          { suit: 'diamonds', rank: 9, id: 48, isJoker: false, hidden: false },<br>
        ],<br>
        [
          { suit: 'clubs', rank: 9, id: 35, isJoker: false, hidden: false },<br>
        ],<br>
        [<br>
          { suit: 'clubs', rank: 10, id: 36, isJoker: false, hidden: false },<br>
        ],<br>
        [<br>
          { suit: 'hearts', rank: 3, id: 16, isJoker: false, hidden: false },<br>
        ],<br>
        [],<br>
        ],<br>
        s_pile : [
        { suit: 'clubs', rank: 1, id: 27, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 7, id: 20, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 6, id: 19, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 2, id: 41, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 2, id: 15, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 13, id: 52, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 12, id: 25, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 11, id: 24, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 11, id: 50, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 10, id: 23, isJoker: false, hidden: false },
        { suit: 'spades', rank: 5, id: 5, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 5, id: 44, isJoker: false, hidden: false },
        { suit: 'spades', rank: 7, id: 7, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 8, id: 21, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 4, id: 43, isJoker: false, hidden: false },
        { suit: 'spades', rank: 13, id: 13, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 12, id: 38, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 5, id: 18, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 7, id: 46, isJoker: false, hidden: false },
        { suit: 'spades', rank: 6, id: 6, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 4, id: 30, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 13, id: 39, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 8, id: 47, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 12, id: 51, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 6, id: 32, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 3, id: 29, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 1, id: 40, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 5, id: 31, isJoker: false, hidden: false },
        { suit: 'spades', rank: 9, id: 9, isJoker: false, hidden: false },
        { suit: 'spades', rank: 11, id: 11, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 6, id: 45, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 8, id: 34, isJoker: false, hidden: false },
        { suit: 'spades', rank: 4, id: 4, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 10, id: 49, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 11, id: 37, isJoker: false, hidden: false },
        { suit: 'diamonds', rank: 3, id: 42, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 1, id: 14, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 13, id: 26, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 7, id: 33, isJoker: false, hidden: false },
        { suit: 'spades', rank: 12, id: 12, isJoker: false, hidden: false },
        { suit: 'spades', rank: 10, id: 10, isJoker: false, hidden: false },
        { suit: 'clubs', rank: 2, id: 28, isJoker: false, hidden: false },
        { suit: 'hearts', rank: 4, id: 17, isJoker: false, hidden: false },
        ]	
      }
    },</div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      let socket = io();
      socket.on('message', function(msg){
        console.log(msg);
    });

    let ping;
    socket.on('room control', () => {
      if(ping == undefined) {
        ping = setInterval(() => {
          socket.emit('session ping');
          console.log("Ping send");
        }, 2000);
      }
    })
    
    function accessRoom(roomID) {
      socket.emit('accessRoom', roomID);
    }

    function doTheThing() 
    {  
      let action = JSON.parse(document.getElementById("testAction").value);
      socket.emit("player action", action, (state) => {
        document.getElementById("stateDisplay").innerText = JSON.stringify(state);
      })
    }
    </script>
  </body>
</html>
